syntax = "proto3";

package greet;

// The greeting service definition.
service Communication {
	// Unary
	rpc SubmitReport (ReportMessage) returns (ServerMessage);
  rpc NagiosCommunication (ClientMessage) returns (ServerMessage);
	// Both Streaming
	rpc BidirectionalCommunication (stream ClientMessage) returns (stream ServerMessage);
  rpc IndicatorReport (IndicatorMessage) returns (ServerMessage);
  /*rpc ApiRequest (stream ClientRequest) returns (stream Data);*/
}

// The request message containing the user's name.
message ClientMessage{
  string ip = 1;
  string message = 2;
}

// The response message containing the greetings.
message ServerMessage {
  string message = 1;
}

message ReportMessage {
  string ip = 1;
	string json = 2;
}

message IndicatorMessage {
  string ip = 1;
  string timestamp = 2;
  string indicator = 3;
  string detector = 4;
}

/*message ClientRequest{
  int type = 1;
}*/

/*message Data{
  string info = 1;
}*/